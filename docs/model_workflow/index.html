<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Overview of the workflow · ArchetypeBuildingModel</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ArchetypeBuildingModel</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">ArchetypeBuildingModel.jl</a></li><li><a class="tocitem" href="../defining_archetype_buildings/">Defining archetype buildings</a></li><li class="is-active"><a class="tocitem" href>Overview of the workflow</a><ul class="internal"><li><a class="tocitem" href="#Command-line-arguments"><span>Command line arguments</span></a></li><li><a class="tocitem" href="#Input-database-tests"><span>Input database tests</span></a></li><li><a class="tocitem" href="#Process-ScopeData-structs"><span>Process <code>ScopeData</code> structs</span></a></li><li><a class="tocitem" href="#Process-WeatherData-structs"><span>Process <code>WeatherData</code> structs</span></a></li><li><a class="tocitem" href="#Process-ArchetypeBuilding-structs"><span>Process <code>ArchetypeBuilding</code> structs</span></a></li><li><a class="tocitem" href="#Solve-the-HVAC-demand"><span>Solve the HVAC demand</span></a></li><li><a class="tocitem" href="#Export-SpineOpt-input-data"><span>Export SpineOpt input data</span></a></li><li><a class="tocitem" href="#Export-Backbone-input-data"><span>Export Backbone input data</span></a></li></ul></li><li><a class="tocitem" href="../archetype_modelling/">Archetype building modelling</a></li><li><a class="tocitem" href="../archetypebuildingweather/">ArchetypeBuildingWeather.py</a></li><li><a class="tocitem" href="../output_processing/">Input data processing for large-scale energy system modelling frameworks</a></li><li><a class="tocitem" href="../archetype_definitions/">Input data reference</a></li><li><a class="tocitem" href="../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Overview of the workflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Overview of the workflow</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vttresearch/ArchetypeBuildingModel/blob/main/documentation/src/model_workflow.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Overview-of-the-workflow"><a class="docs-heading-anchor" href="#Overview-of-the-workflow">Overview of the workflow</a><a id="Overview-of-the-workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Overview-of-the-workflow" title="Permalink"></a></h1><p>The following sections aim to go over the main program file <code>process_archetype_buildings.jl</code> and explain the high-level workflow of the <code>ArchetypeBuildingModel.jl</code>. Links are provided to the detailed explanations of the different data structures and functions in the <a href="../library/#Library">Library</a> section for readers interested in the technical details.</p><h2 id="Command-line-arguments"><a class="docs-heading-anchor" href="#Command-line-arguments">Command line arguments</a><a id="Command-line-arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Command-line-arguments" title="Permalink"></a></h2><p>The <code>process_archetype_buildings.jl</code> main program file has been primarily designed to be run via <a href="https://github.com/Spine-project/Spine-Toolbox">Spine Toolbox</a>, but be run directly from the command line as well if necessary. Regardless, the main program is controlled using the following command line arguments:</p><ol><li>The <code>url</code> to a <em>Spine Datastore</em> containing the required input data and archetype building definitions.</li></ol><p>Furthermore, the following optional keyword arguments can be provided:</p><ul><li><code>-spineopt &lt;&gt;</code>, the url to a <em>Spine Datastore</em> where the produced <em>SpineOpt</em> input data should be written, if any.</li><li><code>-backbone &lt;&gt;</code>, the url to a <em>Spine Datastore</em> where the produced <em>Backbone</em> input data should be written, if any.</li><li><code>results &lt;url&gt;</code>, url to a <em>Spine Datastore</em> where the produced baseline HVAC demand results should be written. By default, the results are written back into the input datastore at <code>url</code>.</li><li><code>-weather &lt;url&gt;</code>, the url to a <em>Spine Datastore</em> into which the autogenerated weather data is imported. If not provided, weather data is written back into the input data <code>url</code>.</li><li><code>-save_layouts &lt;false&gt;</code>, controls whether auto-generated <code>building_weather</code> layouts are saved as images. Set to <code>false</code> by default.</li><li><code>alternative &lt;&quot;&quot;&gt;</code>, the name of the <em>Spine Datastore</em> alternative where the <code>-spineopt</code> and <code>backbone</code> input data are saved. An empty string by default, resulting in <em>Spine Toolbox</em> automatically generating an alternative name when importing the parameter values.</li></ul><p>The <code>-save_layouts</code> keyword exists primarily for debugging purposes, allowing visual inspection of the weather data weighting rasters.</p><h2 id="Input-database-tests"><a class="docs-heading-anchor" href="#Input-database-tests">Input database tests</a><a id="Input-database-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Input-database-tests" title="Permalink"></a></h2><p>Next, the main program opens the input <em>Datastore</em>, and performs a series of tests on the input data and archetype building definitions to check that they make sense. If not, the main program will halt and display the test results and error messages for the user, in order to help them deduce what is wrong with the input data or definitions.</p><p>The input <em>Datastore</em> tests are handled by the <a href="../library/#ArchetypeBuildingModel.run_object_class_tests"><code>run_object_class_tests</code></a>, <a href="../library/#ArchetypeBuildingModel.run_parameter_tests"><code>run_parameter_tests</code></a>, and <a href="../library/#ArchetypeBuildingModel.run_structure_type_tests"><code>run_structure_type_tests</code></a> functions.</p><h2 id="Process-ScopeData-structs"><a class="docs-heading-anchor" href="#Process-ScopeData-structs">Process <code>ScopeData</code> structs</a><a id="Process-ScopeData-structs-1"></a><a class="docs-heading-anchor-permalink" href="#Process-ScopeData-structs" title="Permalink"></a></h2><p>As explained by <a href="../defining_archetype_buildings/#The-building_scope-definition">The <code>building_scope</code> definition</a> section, the <a href="../archetype_definitions/#building_scope">building_scope</a> defines the geographical and statistical scope for a <a href="../archetype_definitions/#building_archetype">building_archetype</a>. Before we can begin creating lumped-capacitance thermal models for the archetype buildings, the main program first needs to know the aggregated average basic properties of the archetype. Thus, the next step is to process and create the <a href="../library/#ArchetypeBuildingModel.ScopeData"><code>ScopeData</code></a> structs for all the <a href="../archetype_definitions/#building_scope">building_scope</a>s attached to a <a href="../archetype_definitions/#building_archetype">building_archetype</a> via a <a href="../archetype_definitions/#building_archetype__building_scope">building_archetype__building_scope</a> relationship <em>(scopes not attached to any archetype are not processed)</em>.</p><p>The final <a href="../library/#ArchetypeBuildingModel.ScopeData"><code>ScopeData</code></a> structs are stored into a <code>scope_data_dictionary</code>, which can be examined through the Julia REPL after the main program has finished.</p><h2 id="Process-WeatherData-structs"><a class="docs-heading-anchor" href="#Process-WeatherData-structs">Process <code>WeatherData</code> structs</a><a id="Process-WeatherData-structs-1"></a><a class="docs-heading-anchor-permalink" href="#Process-WeatherData-structs" title="Permalink"></a></h2><p>After the main program is done with <a href="#Process-ScopeData-structs">Process <code>ScopeData</code> structs</a>, the next step is to process the <a href="../archetype_definitions/#building_weather">building_weather</a> definitions into <a href="../library/#ArchetypeBuildingModel.WeatherData"><code>WeatherData</code></a> before forming the archetype building lumped-capacitance thermal models. However, since <a href="../defining_archetype_buildings/#The-building_weather-definition">The <code>building_weather</code> definition</a> isn&#39;t mandatory, the main program first checks which <a href="../archetype_definitions/#building_archetype">building_archetype</a> definitions lack a <a href="../archetype_definitions/#building_archetype__building_weather">building_archetype__building_weather</a> definition, and tries to fetch it automatically using the <a href="../archetypebuildingweather/#ArchetypeBuildingWeather.py">ArchetypeBuildingWeather.py</a> sub-module. Essentially, the automatic weather generation is handled via the <a href="../library/#ArchetypeBuildingModel.create_building_weather"><code>create_building_weather</code></a> function based on <a href="../defining_archetype_buildings/#The-building_archetype-definition">The <code>building_archetype</code> definition</a> and the processed <a href="../library/#ArchetypeBuildingModel.ScopeData"><code>ScopeData</code></a>.</p><p>The main program will import the automatically generated <a href="../archetype_definitions/#building_weather">building_weather</a> objects into the <em>Spine Datastore</em> at <code>-weather &lt;url&gt;</code>, as well as link it to the appropriate <a href="../archetype_definitions/#building_archetype">building_archetype</a> via the <a href="../archetype_definitions/#building_archetype__building_weather">building_archetype__building_weather</a> relationship. Regardless, the final <a href="../library/#ArchetypeBuildingModel.WeatherData"><code>WeatherData</code></a> structs are stored into a <code>weather_data_dictionary</code>, which can be examined through the Julia REPL after the main program has finished.</p><h2 id="Process-ArchetypeBuilding-structs"><a class="docs-heading-anchor" href="#Process-ArchetypeBuilding-structs">Process <code>ArchetypeBuilding</code> structs</a><a id="Process-ArchetypeBuilding-structs-1"></a><a class="docs-heading-anchor-permalink" href="#Process-ArchetypeBuilding-structs" title="Permalink"></a></h2><p>With all the pieces now in place, the main program can finally process all the data into lumped-capacitance thermal models depicting the desired synthetic average archetype buildings. This is handled by the <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a> struct constructor, and takes as input <a href="../defining_archetype_buildings/#The-building_archetype-definition">The <code>building_archetype</code> definition</a>, as well as the appropriate <a href="../library/#ArchetypeBuildingModel.ScopeData"><code>ScopeData</code></a> and <a href="../library/#ArchetypeBuildingModel.WeatherData"><code>WeatherData</code></a> processed during the previous steps.</p><p>The <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a> contains all the information about the final lumped-capacitance thermal model of the synthetic average archetype building, as well as the definitions used in its construction. The final <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a> structs are stored into an <code>archetype_dictionary</code>, which can be examined through the Julia REPL after the main program has finished.</p><h2 id="Solve-the-HVAC-demand"><a class="docs-heading-anchor" href="#Solve-the-HVAC-demand">Solve the HVAC demand</a><a id="Solve-the-HVAC-demand-1"></a><a class="docs-heading-anchor-permalink" href="#Solve-the-HVAC-demand" title="Permalink"></a></h2><p>After processing the <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a>s, the main program will calculate a baseline/reference heating/cooling demand using the lumped-capacitance thermal models of the synthetic average archetype buildings. This is handled by the <a href="../library/#ArchetypeBuildingModel.ArchetypeBuildingResults"><code>ArchetypeBuildingResults</code></a> struct and its constructor.</p><p>The final <a href="../library/#ArchetypeBuildingModel.ArchetypeBuildingResults"><code>ArchetypeBuildingResults</code></a> are written back into the input <em>Datastore</em>, as well as stored into an <code>archetype_results_dictionary</code>, which can be examined through the Julia REPL after the main program has finished.</p><h2 id="Export-SpineOpt-input-data"><a class="docs-heading-anchor" href="#Export-SpineOpt-input-data">Export SpineOpt input data</a><a id="Export-SpineOpt-input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Export-SpineOpt-input-data" title="Permalink"></a></h2><p>If the <code>-spineopt &lt;url&gt;</code> argument is given, the main program will attempt to convert the <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a>s in the <code>archetype_dictionary</code> into <em>SpineOpt</em> energy system model input data, and export that input data into the <em>Spine Datastore</em> at the given <code>url</code>.</p><p>The input data creation is handled by the <a href="../library/#ArchetypeBuildingModel.SpineOptInput"><code>SpineOptInput</code></a> struct and its constructor.</p><h2 id="Export-Backbone-input-data"><a class="docs-heading-anchor" href="#Export-Backbone-input-data">Export Backbone input data</a><a id="Export-Backbone-input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Export-Backbone-input-data" title="Permalink"></a></h2><p>If the <code>-backbone &lt;url&gt;</code> argument is given, the main program will attempt to convert the <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a>s in the <code>archetype_dictionary</code> into <em>Backbone</em> energy system model input data, and export that input data into the <em>Spine Datastore</em> at the given <code>url</code>.</p><p>The input data creation is handled by the <a href="../library/#ArchetypeBuildingModel.BackboneInput"><code>BackboneInput</code></a> struct and its constructor.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../defining_archetype_buildings/">« Defining archetype buildings</a><a class="docs-footer-nextpage" href="../archetype_modelling/">Archetype building modelling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 17 March 2023 12:48">Friday 17 March 2023</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
