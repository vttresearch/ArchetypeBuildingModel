<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ArchetypeBuildingModel.jl · ArchetypeBuildingModel</title><meta name="title" content="ArchetypeBuildingModel.jl · ArchetypeBuildingModel"/><meta property="og:title" content="ArchetypeBuildingModel.jl · ArchetypeBuildingModel"/><meta property="twitter:title" content="ArchetypeBuildingModel.jl · ArchetypeBuildingModel"/><meta name="description" content="Documentation for ArchetypeBuildingModel."/><meta property="og:description" content="Documentation for ArchetypeBuildingModel."/><meta property="twitter:description" content="Documentation for ArchetypeBuildingModel."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>ArchetypeBuildingModel</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>ArchetypeBuildingModel.jl</a><ul class="internal"><li><a class="tocitem" href="#Key-limitations"><span>Key limitations</span></a></li><li><a class="tocitem" href="#Related-works"><span>Related works</span></a></li><li><a class="tocitem" href="#Future-work?"><span>Future work?</span></a></li><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li></ul></li><li><a class="tocitem" href="defining_archetype_buildings/">Defining archetype buildings</a></li><li><a class="tocitem" href="model_workflow/">Overview of the workflow</a></li><li><a class="tocitem" href="archetype_modelling/">Archetype building modelling</a></li><li><a class="tocitem" href="archetypebuildingweather/">ArchetypeBuildingWeather.py</a></li><li><a class="tocitem" href="output_processing/">Input data processing for large-scale energy system modelling frameworks</a></li><li><a class="tocitem" href="archetype_definitions/">Input data reference</a></li><li><a class="tocitem" href="library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ArchetypeBuildingModel.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ArchetypeBuildingModel.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/vttresearch/ArchetypeBuildingModel" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/vttresearch/ArchetypeBuildingModel/blob/main/documentation/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ArchetypeBuildingModel.jl"><a class="docs-heading-anchor" href="#ArchetypeBuildingModel.jl">ArchetypeBuildingModel.jl</a><a id="ArchetypeBuildingModel.jl-1"></a><a class="docs-heading-anchor-permalink" href="#ArchetypeBuildingModel.jl" title="Permalink"></a></h1><p>A <a href="https://github.com/Spine-project/SpineInterface.jl">SpineInterface.jl</a>-based Julia module for aggregating building stock data into desired archetype building lumped-capacitance thermal models.</p><p>The goal of this module is to provide an easy way to define and aggregate building stock statistical data into arbitrary sets of synthetic average archetype building lumped-capacitance thermal models, depicting the flexible heating/cooling demand of a building stock. These lumped-capacitance thermal models are created primarily for seamless integration into large-scale energy system models like <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> or <a href="https://github.com/Spine-project/SpineOpt.jl">SpineOpt</a>, in order to depict flexible heating/cooling demand of significant portions of the building stock.</p><p>Essentially, this module takes input data and archetype building definitions in the format detailed in the <a href="archetype_definitions/#Input-data-reference">Input data reference</a> section as input, processes them according to the workflow detailed in the <a href="model_workflow/#Overview-of-the-workflow">Overview of the workflow</a> section, and produces lumped-capacitance thermal models of the desired synthetic average archetype buildings depicting the heating/cooling demand and HVAC energy consumption of a building stock, explained in the <a href="archetype_modelling/#Archetype-building-modelling">Archetype building modelling</a> section. While weather data can be provided by the user if desired, the <a href="archetypebuildingweather/#ArchetypeBuildingWeather.py">ArchetypeBuildingWeather.py</a> python sub-module provides automatic fetching and processing of the necessary weather data based on the provided archetype building definitions. <a href="archetype_modelling/#Solving-the-baseline-heating-demand-and-HVAC-equipment-consumption">Solving the baseline heating demand and HVAC equipment consumption</a> is also calculated using very simple rule-based control keeping the node temperatures within permitted limits.</p><p>The key outputs from this module, however, are the readily made <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> or <a href="https://github.com/Spine-project/SpineOpt.jl">SpineOpt</a> input datasets that can be plugged into their respective energy system models for depicting the flexible heating/cooling demand of the depicted building stock. See the figure below for a high-level illustration of the workflow.</p><p>This documentation is organized as follows: The <a href="defining_archetype_buildings/#Defining-archetype-buildings">Defining archetype buildings</a> section explains how the archetype buildings are defined, meaning the key components in the <a href="archetype_definitions/#Input-data-reference">Input data reference</a>, and how to use them. The <a href="model_workflow/#Overview-of-the-workflow">Overview of the workflow</a> section goes through the <code>process_archetype_buildings.jl</code> main program file, explaining what is actually being done when aggregating the building stock data into the desired synthetic average archetype buildings. The <a href="archetype_modelling/#Archetype-building-modelling">Archetype building modelling</a> section explains the lumped-capacitance thermal modelling approach used by this module in more detail, while the <a href="archetypebuildingweather/#ArchetypeBuildingWeather.py">ArchetypeBuildingWeather.py</a> section briefly explains the logic and workings of the python sub-module handling the automatic weather data processing. The <a href="output_processing/#Input-data-processing-for-large-scale-energy-system-modelling-frameworks">Input data processing for large-scale energy system modelling frameworks</a> section provides an overview of how the data is further processed to be compatible with <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> and <a href="https://github.com/Spine-project/SpineOpt.jl">SpineOpt</a>. Finally, the <a href="archetype_definitions/#Input-data-reference">Input data reference</a> and the <a href="library/#Library">Library</a> sections provide comprehensive documentation of the definition/input data format and the modelling code respectively.</p><p><img src="ABMFlow.png" alt="ABMWorkflow"/></p><h2 id="Key-limitations"><a class="docs-heading-anchor" href="#Key-limitations">Key limitations</a><a id="Key-limitations-1"></a><a class="docs-heading-anchor-permalink" href="#Key-limitations" title="Permalink"></a></h2><p>Due to the used simplified modelling approach, there are several key limitations for the model that users should be aware of:</p><ol><li><p><strong>ArchetypeBuildingModel.jl primarily aims to depict the <em>flexibility</em> in building stock heating/cooling demand, and <em>NOT</em> the demand itself.</strong> While the model produces baseline heating and cooling demand timeseries, it is important to understand that these timeseries are oversimplified compared to the actual demand. Due to the limited number of archetype buildings and the used single-zone approach, there can be relatively long periods where, <em>on average</em>, the model requires no heating and cooling at all. In reality, it is all but guaranteed that there will always be some buildings <em>(or zones therein)</em> requiring at least some cooling and/or heating at any given time.</p></li><li><p><strong>Heating and cooling set points can currently only be provided as constants, which can have a major impact on the modelled heating/cooling flexibility.</strong> In some places, it is common to significantly reduce heating when buildings are unoccupied in order to save energy. While such boundaries would pose no problems for the intended use in large-scale energy system optimisation models, the simple rule-based controller currently used for calculating the baseline heating/cooling demand cannot handle changing set points.</p></li><li><p><strong>Several real-life phenomena affecting the heating/cooling demand are neglected for simplicity:</strong></p><ul><li>Temperature-dependent bypass of ventilation heat recovery units (HRUs). In reality, HRUs can be bypassed in summer to reduce cooling loads, but implementing these types of controls compatible with mixed-integer linear programming frameworks is not straightforward. Likely results in overestimated cooling flexibility.</li><li>Potential opening of doors/windows for additional ventilation or cooling by the inhabitants, likely resulting in overestimated cooling demand flexibility.</li><li>Potential use of active solar shading elements in buildings, e.g. blinds, for reducing solar heat gains in summer to reduce cooling loads. Likely results in overestimated cooling demand.</li><li>Potential change in inhabitant behaviour to increase/reduce internal heat gains depending on indoor air temperature.</li></ul></li></ol><h2 id="Related-works"><a class="docs-heading-anchor" href="#Related-works">Related works</a><a id="Related-works-1"></a><a class="docs-heading-anchor-permalink" href="#Related-works" title="Permalink"></a></h2><p>For an up-to-date list of works using <a href="#ArchetypeBuildingModel.jl">ArchetypeBuildingModel.jl</a>, please refer to the <a href="https://cris.vtt.fi/en/publications/archetypebuildingmodeljl-a-julia-module-for-aggregating-building-">VTT Research Information System entry on ArchetypeBuildingModel.jl</a>. Regardless, here are a couple of author-curated highlights:</p><ol><li><a href="https://zenodo.org/doi/10.5281/zenodo.7623739">Sensitivity analysis and comparison against dedicated white-box building simulation software (Preprint)</a></li><li><a href="https://zenodo.org/doi/10.5281/zenodo.7767363">Building-level optimal energy management (Preprint)</a></li><li><a href="https://cris.vtt.fi/en/publications/stochastic-model-predictive-control-of-district-scale-building-en">Stochastic district-level energy management (Accepted and presented at the BS2023 conference, yet to be published)</a></li><li><a href="https://zenodo.org/doi/10.5281/zenodo.8238141">Demo for generating EU-level flexible building stock heating/cooling models for SpineOpt</a></li><li><a href="https://cris.vtt.fi/en/publications/heating-demand-response-in-detached-houses-comparing-cost-savings">Analysing the impacts of flexible residential electric heating for Finland (MSc thesis)</a></li></ol><h2 id="Future-work?"><a class="docs-heading-anchor" href="#Future-work?">Future work?</a><a id="Future-work?-1"></a><a class="docs-heading-anchor-permalink" href="#Future-work?" title="Permalink"></a></h2><p>Overall, I&#39;m beginning to feel that <em>ArchetypeBuildingModel.jl</em> is too complicated to be truly useful, and different simplifications are required. Instead, it might be worthwhile to try an approach where the heating and cooling demand are separated from the depiction of the <em>flexibility</em>, as this would offer two key advantages:</p><ol><li><p><strong>Modularity:</strong> If the calculation of the heating/cooling demand of the modelled building stock could be separated from how the flexibility is depicted, it would allow easy swapping between different models for calculating the heating/cooling demand.</p></li><li><p><strong>Accuracy?</strong> If the heating/cooling demand is separated from the flexibility, it should allow more accurate depictions of aggregated heating/cooling demand, mitigating point 1 in <a href="#Key-limitations">Key limitations</a>.</p></li></ol><p>Essentially, the flexibility in heating/cooling demand could maybe be represented as a storage of the <em>deviation</em> from the baseline heating/cooling demand. At least two storage nodes would probably still be necessary to accurately capture short-term flexibility due to the faster response of indoor air temperatures to any changes in heating/cooling power, acting as a buffer between energy in and the heating/cooling demand. However, there are some foreseeable challenges with such an approach:</p><ol><li><p><strong>Accuracy?</strong> Even if the heating/cooling demand could be depicted more accurately, it is possible that depicting flexibility becomes more challenging requiring simplifications affecting the modelled accuracy. Can time-varying ambient or indoor conditions be properly accounted for?</p></li><li><p><strong>Heating vs cooling demand?</strong> Can heating and cooling demand be properly captured if the flexibility if modelled as a <em>storage for temperature deviation</em>?</p></li></ol><p>So who knows if such an approach would be any more worthwhile?</p><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="archetype_definitions/#Input-data-reference">Input data reference</a></li><li class="no-marker"><ul><li><a href="archetype_definitions/#Contents">Contents</a></li><li><a href="archetype_definitions/#Object-classes">Object classes</a></li><li><a href="archetype_definitions/#Object-parameters">Object parameters</a></li><li><a href="archetype_definitions/#Objects">Objects</a></li><li><a href="archetype_definitions/#Relationship-classes">Relationship classes</a></li><li><a href="archetype_definitions/#Relationship-parameters">Relationship parameters</a></li></ul></li><li><a href="archetype_modelling/#Archetype-building-modelling">Archetype building modelling</a></li><li class="no-marker"><ul><li><a href="archetype_modelling/#Forming-the-building-envelope">Forming the building envelope</a></li><li><a href="archetype_modelling/#Preparing-the-building-loads">Preparing the building loads</a></li><li><a href="archetype_modelling/#Calculating-the-properties-of-the-lumped-capacitance-thermal-nodes">Calculating the properties of the lumped-capacitance thermal nodes</a></li><li><a href="archetype_modelling/#Calculating-the-properties-of-the-HVAC-equipment">Calculating the properties of the HVAC equipment</a></li><li><a href="archetype_modelling/#Solving-the-baseline-heating-demand-and-HVAC-equipment-consumption">Solving the baseline heating demand and HVAC equipment consumption</a></li></ul></li><li><a href="archetypebuildingweather/#ArchetypeBuildingWeather.py">ArchetypeBuildingWeather.py</a></li><li class="no-marker"><ul><li><a href="archetypebuildingweather/#Input-data-requirements-for-the-automatic-weather-data-aggregation">Input data requirements for the automatic weather data aggregation</a></li><li><a href="archetypebuildingweather/#High-level-description-of-the-weather-data-aggregation,-the-aggregate_weather-function">High-level description of the weather data aggregation, the <code>aggregate_weather</code> function</a></li></ul></li><li><a href="defining_archetype_buildings/#Defining-archetype-buildings">Defining archetype buildings</a></li><li class="no-marker"><ul><li><a href="defining_archetype_buildings/#The-building_archetype-definition">The <code>building_archetype</code> definition</a></li><li><a href="defining_archetype_buildings/#The-building_scope-definition">The <code>building_scope</code> definition</a></li><li><a href="defining_archetype_buildings/#The-building_fabrics-definition">The <code>building_fabrics</code> definition</a></li><li><a href="defining_archetype_buildings/#The-building_systems-definition">The <code>building_systems</code> definition</a></li><li><a href="defining_archetype_buildings/#The-building_loads-definition">The <code>building_loads</code> definition</a></li><li><a href="defining_archetype_buildings/#The-building_weather-definition">The <code>building_weather</code> definition</a></li></ul></li><li><a href="#ArchetypeBuildingModel.jl">ArchetypeBuildingModel.jl</a></li><li class="no-marker"><ul><li><a href="#Key-limitations">Key limitations</a></li><li><a href="#Related-works">Related works</a></li><li><a href="#Future-work?">Future work?</a></li><li><a href="#Contents">Contents</a></li></ul></li><li><a href="library/#Library">Library</a></li><li class="no-marker"><ul><li><a href="library/#Index">Index</a></li><li><a href="library/#Public">Public</a></li><li><a href="library/#Internals">Internals</a></li></ul></li><li><a href="model_workflow/#Overview-of-the-workflow">Overview of the workflow</a></li><li class="no-marker"><ul><li><a href="model_workflow/#Command-line-arguments">Command line arguments</a></li><li><a href="model_workflow/#Input-database-tests">Input database tests</a></li><li><a href="model_workflow/#Process-ScopeData-structs">Process <code>ScopeData</code> structs</a></li><li><a href="model_workflow/#Process-WeatherData-structs">Process <code>WeatherData</code> structs</a></li><li><a href="model_workflow/#Process-ArchetypeBuilding-structs">Process <code>ArchetypeBuilding</code> structs</a></li><li><a href="model_workflow/#Solve-the-HVAC-demand">Solve the HVAC demand</a></li><li><a href="model_workflow/#Export-SpineOpt-input-data">Export SpineOpt input data</a></li><li><a href="model_workflow/#Export-Backbone-input-data">Export Backbone input data</a></li><li><a href="model_workflow/#Export-Generic-input-data">Export Generic input data</a></li></ul></li><li><a href="output_processing/#Input-data-processing-for-large-scale-energy-system-modelling-frameworks">Input data processing for large-scale energy system modelling frameworks</a></li><li class="no-marker"><ul><li><a href="output_processing/#Backbone-input-data-processing">Backbone input data processing</a></li><li><a href="output_processing/#SpineOpt-input-data-processing">SpineOpt input data processing</a></li></ul></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="defining_archetype_buildings/">Defining archetype buildings »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Wednesday 6 December 2023 14:42">Wednesday 6 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
