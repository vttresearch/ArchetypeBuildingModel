<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input data processing for large-scale energy system modelling frameworks · ArchetypeBuildingModel</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ArchetypeBuildingModel</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">ArchetypeBuildingModel.jl</a></li><li><a class="tocitem" href="../defining_archetype_buildings/">Defining archetype buildings</a></li><li><a class="tocitem" href="../model_workflow/">Overview of the workflow</a></li><li><a class="tocitem" href="../archetype_modelling/">Archetype building modelling</a></li><li><a class="tocitem" href="../archetypebuildingweather/">ArchetypeBuildingWeather.py</a></li><li class="is-active"><a class="tocitem" href>Input data processing for large-scale energy system modelling frameworks</a><ul class="internal"><li><a class="tocitem" href="#Backbone-input-data-processing"><span>Backbone input data processing</span></a></li><li><a class="tocitem" href="#SpineOpt-input-data-processing"><span>SpineOpt input data processing</span></a></li></ul></li><li><a class="tocitem" href="../archetype_definitions/">Input data reference</a></li><li><a class="tocitem" href="../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Input data processing for large-scale energy system modelling frameworks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Input data processing for large-scale energy system modelling frameworks</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vttresearch/ArchetypeBuildingModel/blob/main/documentation/src/output_processing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Input-data-processing-for-large-scale-energy-system-modelling-frameworks"><a class="docs-heading-anchor" href="#Input-data-processing-for-large-scale-energy-system-modelling-frameworks">Input data processing for large-scale energy system modelling frameworks</a><a id="Input-data-processing-for-large-scale-energy-system-modelling-frameworks-1"></a><a class="docs-heading-anchor-permalink" href="#Input-data-processing-for-large-scale-energy-system-modelling-frameworks" title="Permalink"></a></h1><p>This section aims to provide brief overviews of adapting the archetype building model for use in large-scale energy system modelling frameworks like <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> and <a href="https://github.com/Spine-project/SpineOpt.jl">SpineOpt</a>. In general, such frameworks are rarely designed with building modelling in mind, and as such don&#39;t support the building-specific data stored within <a href="../library/#ArchetypeBuildingModel.ArchetypeBuilding"><code>ArchetypeBuilding</code></a> and related <code>struct</code>s without further processing. Perhaps the most important step is to understand the roles of <a href="../library/#ArchetypeBuildingModel.AbstractNode"><code>AbstractNode</code></a> and <a href="../library/#ArchetypeBuildingModel.AbstractProcess"><code>AbstractProcess</code></a> as opposed to their detailed counterparts <a href="../library/#ArchetypeBuildingModel.BuildingNodeData"><code>BuildingNodeData</code></a> and <a href="../library/#ArchetypeBuildingModel.BuildingProcessData"><code>BuildingProcessData</code></a>.</p><p>The following <a href="#Processing-thermal-nodes-into-AbstractNodes">Processing thermal nodes into <code>AbstractNode</code>s</a> and <a href="#Processing-HVAC-equipment-into-AbstractProcesses">Processing HVAC equipment into <code>AbstractProcess</code>es</a> sections explain the aggregation and abstraction of building level data for energy-system-scale, while the  <a href="#Backbone-input-data-processing">Backbone input data processing</a> and <a href="#SpineOpt-input-data-processing">SpineOpt input data processing</a> sections focus on the processing workflows of their respective models models.</p><h3 id="Processing-thermal-nodes-into-AbstractNodes"><a class="docs-heading-anchor" href="#Processing-thermal-nodes-into-AbstractNodes">Processing thermal nodes into <code>AbstractNode</code>s</a><a id="Processing-thermal-nodes-into-AbstractNodes-1"></a><a class="docs-heading-anchor-permalink" href="#Processing-thermal-nodes-into-AbstractNodes" title="Permalink"></a></h3><p><a href="../library/#ArchetypeBuildingModel.BuildingNodeData"><code>BuildingNodeData</code></a>, has been designed to be as human-readable and understandable as possible from a building-domain point-of-view, including a plethora of different parameters related to archetype definitions, assumptions, sizing, etc. However, most of these parameters don&#39;t have counterparts in large-scale energy system models, and need to be aggregated into something meaningful. This is done via the <a href="../library/#ArchetypeBuildingModel.process_abstract_node"><code>ArchetypeBuildingModel.process_abstract_node</code></a> function, aggregating all the separate categories of thermal mass, heat transfer, as well as ambient condition and external load related parameters into the bare essentials required for depicting the node in large-scale energy system modelling frameworks, represented by an <a href="../library/#ArchetypeBuildingModel.AbstractNode"><code>AbstractNode</code></a>.</p><blockquote><p><strong>NOTE!</strong> Since ambient-temperature-related interactions are rarely directly supported by large-scale energy system modelling frameworks, they are re-cast into <em>self-discharge</em> and <em>external load</em> components as explained in the <a href="../library/#ArchetypeBuildingModel.process_abstract_node"><code>ArchetypeBuildingModel.process_abstract_node</code></a> docstring.</p></blockquote><p>As this abstraction reduces the amounts of different terms in the equations, it also happens to simplify <a href="../archetype_modelling/#Solving-the-baseline-heating-demand-and-HVAC-equipment-consumption">Solving the baseline heating demand and HVAC equipment consumption</a>, which is why the <a href="../library/#ArchetypeBuildingModel.AbstractNode"><code>AbstractNode</code></a>s are used for the calculations in the <a href="../library/#ArchetypeBuildingModel.solve_heating_demand"><code>ArchetypeBuildingModel.solve_heating_demand</code></a> function.</p><h3 id="Processing-HVAC-equipment-into-AbstractProcesses"><a class="docs-heading-anchor" href="#Processing-HVAC-equipment-into-AbstractProcesses">Processing HVAC equipment into <code>AbstractProcess</code>es</a><a id="Processing-HVAC-equipment-into-AbstractProcesses-1"></a><a class="docs-heading-anchor-permalink" href="#Processing-HVAC-equipment-into-AbstractProcesses" title="Permalink"></a></h3><p>Similar to <a href="../library/#ArchetypeBuildingModel.BuildingNodeData"><code>BuildingNodeData</code></a>, <a href="../library/#ArchetypeBuildingModel.BuildingProcessData"><code>BuildingProcessData</code></a> has been designed primarily with human-readability in mind, containing multiple parameters related to coefficients of performance, sizing of the systems, etc. However, for large-scale energy system model input, these are processed to their bare essentials via the <a href="../library/#ArchetypeBuildingModel.process_abstract_system"><code>ArchetypeBuildingModel.process_abstract_system</code></a> function and stored as an <a href="../library/#ArchetypeBuildingModel.AbstractProcess"><code>AbstractProcess</code></a>.</p><blockquote><p><strong>NOTE!</strong> The <code>coefficient_of_performance</code> and <code>maximum_flows</code> properties of the <a href="../library/#ArchetypeBuildingModel.AbstractProcess"><code>AbstractProcess</code></a> account for the <code>number_of_processes</code> and W -&gt; MW scaling for the total conversion from energy-system- to archetype-building-scale, making the units of measurement not immediately obvious. If you want to avoid this scaling, the easiest way to bypass it is to model 1,000,000 identical buildings, in which case the W -&gt; MW scaling negates itself.</p></blockquote><p>Again, this abstraction happens to simplify <a href="../archetype_modelling/#Solving-the-baseline-heating-demand-and-HVAC-equipment-consumption">Solving the baseline heating demand and HVAC equipment consumption</a>, thus making use of the <a href="../library/#ArchetypeBuildingModel.AbstractProcess"><code>AbstractProcess</code></a> in the <a href="../library/#ArchetypeBuildingModel.solve_consumption"><code>ArchetypeBuildingModel.solve_consumption</code></a> function.</p><h2 id="Backbone-input-data-processing"><a class="docs-heading-anchor" href="#Backbone-input-data-processing">Backbone input data processing</a><a id="Backbone-input-data-processing-1"></a><a class="docs-heading-anchor-permalink" href="#Backbone-input-data-processing" title="Permalink"></a></h2><p>This section aims to provide an overview of the processing done for producing <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> input data, explaining the logic of and functions withing <code>src/create_backbone_input.jl</code>.</p><p>The <a href="../library/#ArchetypeBuildingModel.BackboneInput"><code>BackboneInput</code></a> <code>struct</code> contains the relevant input data structure for representing the produced archetype building models within <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a>. The similarly named constructor takes as input a dictionary containing the defined <a href="../archetype_definitions/#building_archetype">building_archetype</a> linked to its processed <a href="../library/#ArchetypeBuildingModel.ArchetypeBuildingResults"><code>ArchetypeBuildingResults</code></a>, loops over the archetypes, and adds them to the <a href="../library/#ArchetypeBuildingModel.BackboneInput"><code>BackboneInput</code></a> one by one. The actual processing is handled by the <a href="../library/#ArchetypeBuildingModel.add_archetype_to_input!"><code>ArchetypeBuildingModel.add_archetype_to_input!</code></a> function, which performs a lot of rather complicated manipulations to adapt the archetype building data for <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a>. For people familar with <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> model structure, the key points are:</p><ol><li>Each <a href="../archetype_definitions/#building_archetype">building_archetype</a> is mapped into a <code>grid</code>.</li><li>Each <a href="../library/#ArchetypeBuildingModel.AbstractNode"><code>AbstractNode</code></a> is mapped into a <code>node</code> in the corresponding archetype <code>grid</code>.</li><li>Each <a href="../library/#ArchetypeBuildingModel.AbstractProcess"><code>AbstractProcess</code></a> is mapped into a <code>unit</code>.</li><li>System link nodes defined by <a href="../archetype_definitions/#building_archetype__system_link_node">building_archetype__system_link_node</a> relationships and the associated <a href="../archetype_definitions/#node_name">node_name</a> and <a href="../archetype_definitions/#grid_name">grid_name</a> are created to serve as connection points to potential energy system datasets.</li></ol><p>Since <a href="../#ArchetypeBuildingModel.jl">ArchetypeBuildingModel.jl</a> is based on <a href="https://github.com/Spine-project/SpineInterface.jl">SpineInterface.jl</a>, the produced <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> input is saved in its Spine Datastore format, and requires the use of <a href="https://github.com/Spine-project/Spine-Toolbox">Spine Toolbox</a> and the associated tools contained within the <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a> repository in order to produce the <code>inputData.gdx</code> for running the model. Additionally, the <code>backbone_utils/export_auxiliary_building_data.json</code> exporter specification can be used for exporting useful <code>.gdx</code> data not directly used by <a href="https://cris.vtt.fi/en/publications/backbone">Backbone</a>.</p><h2 id="SpineOpt-input-data-processing"><a class="docs-heading-anchor" href="#SpineOpt-input-data-processing">SpineOpt input data processing</a><a id="SpineOpt-input-data-processing-1"></a><a class="docs-heading-anchor-permalink" href="#SpineOpt-input-data-processing" title="Permalink"></a></h2><p>Implemented, but no documentation yet. Feel free to look at the docstrings:</p><ul><li><code>src/process_spineopt_input.jl</code></li><li><a href="../library/#ArchetypeBuildingModel.SpineOptInput"><code>SpineOptInput</code></a>,</li><li><a href="../library/#ArchetypeBuildingModel.add_archetype_to_input!"><code>ArchetypeBuildingModel.add_archetype_to_input!</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../archetypebuildingweather/">« ArchetypeBuildingWeather.py</a><a class="docs-footer-nextpage" href="../archetype_definitions/">Input data reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 4 September 2023 10:34">Monday 4 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
